<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Programmable filter  See here for documentation
Basic input/output 1 2 3 4 5 6 7  vector_data = inputs[0].PointData['vector_data'] scalar_data = inputs[0]."><meta property="og:title" content="Paraview"><meta property="og:description" content="Programmable filter  See here for documentation
Basic input/output 1 2 3 4 5 6 7  vector_data = inputs[0].PointData['vector_data'] scalar_data = inputs[0]."><meta property="og:type" content="website"><meta property="og:image" content="https://lucasmyers97.github.io/icon.png"><meta property="og:url" content="https://lucasmyers97.github.io/notes/paraview/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Paraview"><meta name=twitter:description content="Programmable filter  See here for documentation
Basic input/output 1 2 3 4 5 6 7  vector_data = inputs[0].PointData['vector_data'] scalar_data = inputs[0]."><meta name=twitter:image content="https://lucasmyers97.github.io/icon.png"><title>Paraview</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="show icon" type=image/png sizes=180x180 href=https://lucasmyers97.github.io//icon.png><link href=https://lucasmyers97.github.io/styles.1b269cdc020255a7e66ef157aa734173.min.css rel=stylesheet><link href=https://lucasmyers97.github.io/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://lucasmyers97.github.io/js/darkmode.48b974589f2528b9fb55f9fd6fe682c7.min.js type=module></script>
<script src=https://lucasmyers97.github.io/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://lucasmyers97.github.io/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://lucasmyers97.github.io/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://lucasmyers97.github.io/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://lucasmyers97.github.io/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://lucasmyers97.github.io/",fetchData=Promise.all([fetch("https://lucasmyers97.github.io/indices/linkIndex.05cc2967a5dbe88bdd0fab7cbea75635.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://lucasmyers97.github.io/indices/contentIndex.f5288755a7e16716d680732912cca26a.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=document.getElementById("hamburger");e.onclick=e=>clickHamburger();const t=document.getElementById("sidebar-item");t.onclick=e=>clickSidebarItem();const n=document.getElementById("x-button");n.onclick=e=>clickXButton();const s=new URL(BASE_URL),o=s.pathname,i=window.location.pathname,a=o==i;addCopyButtons(),addCollapsibleCallouts(),initPopover("https://lucasmyers97.github.io",!0);const r=document.getElementById("footer");if(r){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=a&&!1;drawGraph("https://lucasmyers97.github.io",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var c=document.getElementsByClassName("mermaid");c.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function l(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const d=document.querySelectorAll("a");for(link of d)link.className.includes("root-title")&&link.addEventListener("click",l,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script>window.Million={navigate:e=>window.location.href=e,prefetch:()=>{}},window.addEventListener("DOMContentLoaded",()=>{init(),render()})</script><script defer data-domain=lucasmyers97.github.io src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><script src=https://lucasmyers97.github.io/js/sidebar_items.ff871780735297d97e07206ac15f603c.js defer></script><div class=sidebar-closed id=sidebar tabindex=-1><div class=sidebar-header><script src=https://lucasmyers97.github.io/js/x_button.1ad6e8a1e0e14df89dbd40291225b8e2.js defer></script>
<label class=x-button-label><div class=x-button id=x-button onclick=clickXButton()><span class=x-line-1></span>
<span class=x-line-2></span></div></label><img src=/icon.png></div><ul><li id=sidebar-item onclick=clickSidebarItem()><a href=https://lucasmyers97.github.io/notes/projects>Projects</a></li><li id=sidebar-item onclick=clickSidebarItem()><a href=https://lucasmyers97.github.io/notes/notes>Notes</a></li><li id=sidebar-item onclick=clickSidebarItem()><a href=https://lucasmyers97.github.io/notes/posts>Posts</a></li><li id=sidebar-item onclick=clickSidebarItem()><a href=https://lucasmyers97.github.io/notes/about_me>About me</a></li></ul></div><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://lucasmyers97.github.io/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://lucasmyers97.github.io/>Lucas Myers</a></h1><div class=titlebar><a href=https://lucasmyers97.github.io/notes/projects>Projects</a>
<a href=https://lucasmyers97.github.io/notes/notes>Notes</a>
<a href=https://lucasmyers97.github.io/notes/posts>Posts</a>
<a href=https://lucasmyers97.github.io/notes/about_me>About me</a></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div><script src=https://lucasmyers97.github.io/js/hamburger.089f9f1dacb3bae82b27831ecc90e423.js defer></script>
<label id=navbutton><div class=hamburger id=hamburger><span class=burger></span>
<span class=space></span>
<span class=burger></span>
<span class=space></span>
<span class=burger></span></div></label></header><article><h1>Paraview</h1><p class=meta>Last updated
Aug 28, 2023
<a href=https://github.com/lucasmyers97/personal-site-quartz/tree/hugo/content/notes/paraview.md rel=noopener>Edit Source</a></p><ul class=tags></ul><a href=#programmable-filter><h1 id=programmable-filter><span class=hanchor arialabel=Anchor># </span>Programmable filter</h1></a><p><a href=https://docs.paraview.org/en/latest/ReferenceManual/pythonProgrammableFilter.html rel=noopener>See here for documentation</a></p><a href=#basic-inputoutput><h2 id=basic-inputoutput><span class=hanchor arialabel=Anchor># </span>Basic input/output</h2></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>vector_data</span> <span class=o>=</span> <span class=n>inputs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>PointData</span><span class=p>[</span><span class=s1>&#39;vector_data&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>scalar_data</span> <span class=o>=</span> <span class=n>inputs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>PointData</span><span class=p>[</span><span class=s1>&#39;scalar_data&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>vector_data</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>scalar_data</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>output</span><span class=o>.</span><span class=n>PointData</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>scalar_data</span> <span class=o>/</span> <span class=mf>2.0</span><span class=p>,</span> <span class=s1>&#39;scalar_data_half&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Output would give:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>(269472, 3)
</span></span></span><span class=line><span class=cl><span class=go>(269472,)
</span></span></span></code></pre></td></tr></table></div></div><p>Additionally, we may get the actual points themselves as follows:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>points</span> <span class=o>=</span> <span class=n>inputs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>GetPoints</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>points</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>for which the output would give:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>(269472, 3)
</span></span></span></code></pre></td></tr></table></div></div><a href=#using-numpy><h2 id=using-numpy><span class=hanchor arialabel=Anchor># </span>Using numpy</h2></a><p>There&rsquo;s a canonical way to transform between numpy arrays and vtk data.
Additionally, there is an algorithms package which allows one to make use of the extra structure in the vtk data (as opposed to just numpy arrays).
This is helpful for things like taking gradients of data.</p><p><a href=https://docs.paraview.org/en/latest/ReferenceManual/vtkNumPyIntegration.html rel=noopener>See here for documentation</a></p><a href=#python-algorithms><h1 id=python-algorithms><span class=hanchor arialabel=Anchor># </span>Python Algorithms</h1></a><p>There is a way to write something akin to a programmable filter (i.e. in Python), but which allows one to take inputs instead of hardcoding in values.
This is helpful because you don&rsquo;t have to go back and find the script every time you want to use the filter &ndash; instead you can just search the filter in Paraview.
They give an example in the Paraview documentation
<a href=https://docs.paraview.org/en/latest/ReferenceManual/pythonProgrammableFilter.html#python-algorithm rel=noopener>here</a>.
However, it only sort of works, and it&rsquo;s hard to combine ideas from the two filters.
Hence, I give an example that I wrote up which calculates the distance of each point from a double helix of a certain distance from the origin, and twist wavenumber:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># same imports as earlier.</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>vtkmodules.vtkCommonDataModel</span> <span class=kn>import</span> <span class=n>vtkDataSet</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>vtkmodules.util.vtkAlgorithm</span> <span class=kn>import</span> <span class=n>VTKPythonAlgorithmBase</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>vtkmodules.numpy_interface</span> <span class=kn>import</span> <span class=n>dataset_adapter</span> <span class=k>as</span> <span class=n>dsa</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># new module for ParaView-specific decorators.</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>paraview.util.vtkAlgorithm</span> <span class=kn>import</span> <span class=n>smproxy</span><span class=p>,</span> <span class=n>smproperty</span><span class=p>,</span> <span class=n>smdomain</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@smproxy</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s2>&#34;Double Helix Filter&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nd>@smproperty</span><span class=o>.</span><span class=n>input</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;Input&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HalfVFilter</span><span class=p>(</span><span class=n>VTKPythonAlgorithmBase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># the rest of the code here is unchanged.</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>VTKPythonAlgorithmBase</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>outputType</span><span class=o>=</span><span class=s1>&#39;vtkUnstructuredGrid&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>distance</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>twist_wavenumber</span> <span class=o>=</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>RequestData</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>inInfo</span><span class=p>,</span> <span class=n>outInfo</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># get the first input.</span>
</span></span><span class=line><span class=cl>        <span class=n>input0</span> <span class=o>=</span> <span class=n>dsa</span><span class=o>.</span><span class=n>WrapDataObject</span><span class=p>(</span><span class=n>vtkDataSet</span><span class=o>.</span><span class=n>GetData</span><span class=p>(</span><span class=n>inInfo</span><span class=p>[</span><span class=mi>0</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>d</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>distance</span>
</span></span><span class=line><span class=cl>        <span class=n>alpha</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>twist_wavenumber</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>p</span> <span class=o>=</span> <span class=n>input0</span><span class=o>.</span><span class=n>GetPoints</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>dist</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>minimum</span><span class=p>(</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span> <span class=p>(</span><span class=n>p</span><span class=p>[:,</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>d</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>alpha</span> <span class=o>*</span> <span class=n>p</span><span class=p>[:,</span> <span class=mi>0</span><span class=p>]))</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>                               <span class=o>+</span> <span class=p>(</span><span class=n>p</span><span class=p>[:,</span> <span class=mi>2</span><span class=p>]</span> <span class=o>-</span> <span class=n>d</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>alpha</span> <span class=o>*</span> <span class=n>p</span><span class=p>[:,</span> <span class=mi>0</span><span class=p>]))</span><span class=o>**</span><span class=mi>2</span> <span class=p>),</span>
</span></span><span class=line><span class=cl>                       <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span> <span class=p>(</span><span class=n>p</span><span class=p>[:,</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>d</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>alpha</span> <span class=o>*</span> <span class=n>p</span><span class=p>[:,</span> <span class=mi>0</span><span class=p>]))</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>                               <span class=o>+</span> <span class=p>(</span><span class=n>p</span><span class=p>[:,</span> <span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>d</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>alpha</span> <span class=o>*</span> <span class=n>p</span><span class=p>[:,</span> <span class=mi>0</span><span class=p>]))</span><span class=o>**</span><span class=mi>2</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>                         <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># add to output</span>
</span></span><span class=line><span class=cl>        <span class=n>output</span> <span class=o>=</span> <span class=n>dsa</span><span class=o>.</span><span class=n>WrapDataObject</span><span class=p>(</span><span class=n>vtkDataSet</span><span class=o>.</span><span class=n>GetData</span><span class=p>(</span><span class=n>outInfo</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>output</span><span class=o>.</span><span class=n>ShallowCopy</span><span class=p>(</span><span class=n>input0</span><span class=o>.</span><span class=n>VTKObject</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>output</span><span class=o>.</span><span class=n>PointData</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>dist</span><span class=p>,</span> <span class=s2>&#34;dist&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@smproperty</span><span class=o>.</span><span class=n>doublevector</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;distance&#34;</span><span class=p>,</span> <span class=n>default_values</span><span class=o>=</span><span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>SetDistance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>distance</span> <span class=o>=</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>Modified</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@smproperty</span><span class=o>.</span><span class=n>doublevector</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;twist_wavenumber&#34;</span><span class=p>,</span> <span class=n>default_values</span><span class=o>=</span><span class=mf>0.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>SetTwistWavenumber</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>twist_wavenumber</span> <span class=o>=</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>Modified</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>Basically you create a Python object which acts as the filter.
The <code>__init__</code> function lets you indicate the number of functions, and the output type (which in this case is an unstructured grid, what I typically use).
To actually do the job of the filter, you define a function <code>RequestData</code>.
There&rsquo;s boilerplate on how to input and output in the same way as the programmable filter, which should be self-explanatory.
You define input parameters to the filter by defining functions which set a particular object member.
Presumably you may use those members in the actual calculation of the filter.
To see other available options for input parameters (including custom xml ones), see the documentation linked above.</p><p>You actually use these in Paraview by loading in the <code>Tools > Manage Plugins</code> window.
Note that you can check a box which will load the plugins at startup.</p><a href=#custom-filters><h1 id=custom-filters><span class=hanchor arialabel=Anchor># </span>Custom filters</h1></a><p>There are often times when one wants to apply a series of filters to many sets of data.
Setting up those filters for each bit of data is often tedious and tortuous, especially when there are settings that can remain the same for every single dataset.
This is doubly true when having to type out (or copy-paste) a script for a programmable filter.
The Paraview utility that handles this is the Custom filter utility.
To use this, select some number of filters (<code>CTRL-&lt;left click></code> on a few), then right click and select <code>Create Custom Filter</code>.
Via this one may specify inputs, outputs, and also which settings to set and which to allow a user to set.
After they are created, custom filters are available just like any other filter.</p><p><a href=https://www.paraview.org/Wiki/ParaView/Custom_Filters rel=noopener>See here for documentation</a></p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/notes/notes/ data-ctx=Paraview data-src=/notes/notes class=internal-link>Notes</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://lucasmyers97.github.io/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Lucas Myers using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2024</p><ul><li><a href=https://lucasmyers97.github.io/>Home</a></li><li><a href=https://github.com/lucasmyers97>GitHub</a></li></ul></footer></div></div></body></html>